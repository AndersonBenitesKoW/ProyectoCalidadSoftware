@{
    ViewData["Title"] = "Contáctanos";
    Layout = "~/Views/Shared/_LayoutPublic.cshtml";
}

<section class="hero-public text-center py-5 mb-5">
    <div class="container">
        <h1 class="fw-bold">Contáctanos</h1>
        <p class="lead">¿Tienes consultas o necesitas asistencia? Estamos aquí para ayudarte.</p>
    </div>
</section>

<div class="container mb-5">
    <div class="row g-4">
        <div class="col-lg-6">
            <div class="card shadow-sm border-0 h-100">
                <div class="card-body">
                    <h4 class="fw-semibold mb-3 text-primary"><i class="bi bi-envelope"></i> Envíanos un mensaje</h4>
                    <form id="contactForm">
                        <div class="mb-3">
                            <label class="form-label">Nombre completo</label>
                            <input type="text" class="form-control" id="contactNombre" placeholder="Ej: Ana Torres" required maxlength="100" />
                            <div class="invalid-feedback">
                                El nombre es obligatorio y debe tener al menos 2 caracteres.
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Correo electrónico</label>
                            <input type="email" class="form-control" id="contactEmail" placeholder="Ej: ana@gmail.com" required />
                            <div class="invalid-feedback">
                                Debe ingresar un email válido.
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Asunto</label>
                            <input type="text" class="form-control" id="contactAsunto" placeholder="Ej: Información sobre citas" maxlength="100" />
                            <div class="invalid-feedback">
                                El asunto debe tener al menos 5 caracteres.
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Mensaje</label>
                            <textarea class="form-control" id="contactMensaje" rows="4" placeholder="Escribe tu mensaje aquí..." required maxlength="1000"></textarea>
                            <div class="invalid-feedback">
                                El mensaje es obligatorio y debe tener al menos 10 caracteres.
                            </div>
                            <div class="form-text">
                                Máximo 1000 caracteres.
                            </div>
                        </div>
                        <div class="text-end">
                            <button type="submit" class="btn btn-primary">
                                <i class="bi bi-send"></i> Enviar mensaje
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const form = document.getElementById('contactForm');
                const nombreInput = document.getElementById('contactNombre');
                const emailInput = document.getElementById('contactEmail');
                const asuntoInput = document.getElementById('contactAsunto');
                const mensajeTextarea = document.getElementById('contactMensaje');
        
                // Validación de nombre
                nombreInput.addEventListener('input', function() {
                    const regex = /^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]+$/;
                    if (this.value && !regex.test(this.value)) {
                        this.value = this.value.replace(/[^a-zA-ZáéíóúÁÉÍÓÚñÑ\s]/g, '');
                    }
                    if (this.value.length > 100) {
                        this.value = this.value.substring(0, 100);
                    }
                });
        
                // Validación de asunto
                asuntoInput.addEventListener('input', function() {
                    if (this.value.length > 100) {
                        this.value = this.value.substring(0, 100);
                    }
                });
        
                // Validación de mensaje
                mensajeTextarea.addEventListener('input', function() {
                    if (this.value.length > 1000) {
                        this.value = this.value.substring(0, 1000);
                    }
                });
        
                // Validación del formulario
                form.addEventListener('submit', function(e) {
                    let isValid = true;
                    const errors = [];
        
                    // Validar nombre
                    if (!nombreInput.value || nombreInput.value.length < 2) {
                        nombreInput.classList.add('is-invalid');
                        errors.push('El nombre debe tener al menos 2 caracteres');
                        isValid = false;
                    } else {
                        nombreInput.classList.remove('is-invalid');
                    }
        
                    // Validar email
                    const emailRegex = new RegExp('^[^\s@@]+\@@[^\s@@]+\.[^\s@@]+$');
                    if (!emailInput.value || !emailRegex.test(emailInput.value)) {
                        emailInput.classList.add('is-invalid');
                        errors.push('Debe ingresar un email válido');
                        isValid = false;
                    } else {
                        emailInput.classList.remove('is-invalid');
                    }
        
                    // Validar asunto (opcional pero si está, debe ser válido)
                    if (asuntoInput.value && asuntoInput.value.length < 5) {
                        asuntoInput.classList.add('is-invalid');
                        errors.push('El asunto debe tener al menos 5 caracteres');
                        isValid = false;
                    } else {
                        asuntoInput.classList.remove('is-invalid');
                    }
        
                    // Validar mensaje
                    if (!mensajeTextarea.value || mensajeTextarea.value.length < 10) {
                        mensajeTextarea.classList.add('is-invalid');
                        errors.push('El mensaje debe tener al menos 10 caracteres');
                        isValid = false;
                    } else {
                        mensajeTextarea.classList.remove('is-invalid');
                    }
        
                    if (!isValid) {
                        e.preventDefault();
                        alert('Por favor, corrija los siguientes errores:\n\n' + errors.join('\n'));
                    }
                });
            });
        </script>

        <div class="col-lg-6">
            <div class="card shadow-sm border-0 h-100">
                <div class="card-body">
                    <h4 class="fw-semibold mb-3 text-primary"><i class="bi bi-geo-alt"></i> Información de contacto</h4>
                    <ul class="list-unstyled">
                        <li class="mb-3"><i class="bi bi-geo-fill text-primary"></i> Av. Larco 1234, Trujillo, Perú</li>
                        <li class="mb-3"><i class="bi bi-telephone-fill text-primary"></i> (044) 123456</li>
                        <li class="mb-3"><i class="bi bi-envelope-fill text-primary"></i> contacto@clinicaobstetrica.pe</li>
                        <li><i class="bi bi-clock text-primary"></i> Lunes a sábado: 8:00 a.m. - 6:00 p.m.</li>
                    </ul>
                    <div class="mt-4">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3901.4972!2d-79.02998!3d-8.11132"
                                width="100%" height="280" style="border:0;" allowfullscreen="" loading="lazy">
                        </iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
